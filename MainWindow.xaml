<Window x:Class="Cloud_Backup_Core.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Cloud_Backup_Core"
        xmlns:converters="clr-namespace:Cloud_Backup_Core.Helpers"
		xmlns:settings="clr-namespace:Cloud_Backup_Core.Views"
        mc:Ignorable="d"
        Title="Cloud Backup Core" Height="250" Width="300" 
		MaxHeight="300" MaxWidth="350"
		MinHeight="250" MinWidth="300"
		ResizeMode="CanResize"
		Background="#DCD7C9"
		>
	<Window.Resources>
		<!--	Status Bar	Background #D6BD98	-->
		<!--	Status Bar	Foreground #2C3930	-->
		<!--	Label		Background #DCD7C9	-->
		<!--	Window		Background #DCD7C9	-->
		
		<converters:BackupStatusToStringConverter x:Key="BackupStatusToStringConverter"/>
		<converters:BackupStatusToBoolConverter x:Key="BackupStatusToBoolConverter" />
		<converters:BackupStatusToVisibilityConverter x:Key="BackupStatusToVisibilityConverter" />
		<converters:DoubleToStringConverter x:Key="DoubleToStringConverter" />
		<Style TargetType="Label" x:Key="MainLabel">
			<Setter Property="Margin" Value="0" />
			<Setter Property="Padding" Value="0" />
			<Setter Property="VerticalContentAlignment" Value="Center" />
			<Setter Property="FontSize" Value="12" />
			<Setter Property="HorizontalContentAlignment" Value="Stretch" />
			<Setter Property="Background" Value="#DCD7C9" />
		</Style>
		<Style TargetType="Label" x:Key="StatusLabel">
			<Setter Property="Margin" Value="0" />
			<Setter Property="Padding" Value="0" />
			<Setter Property="VerticalContentAlignment" Value="Center" />
			<Setter Property="HorizontalContentAlignment" Value="Stretch" />
		</Style>

		<!--	Status Bar	Background #D6BD98	-->
		<!--	Status Bar	Foreground #2C3930	-->
		<!--	Label		Background #DCD7C9	-->
		<!--	Window		Background #DCD7C9	-->
		
		<Style TargetType="StatusBar">
			<Setter Property="Background" Value="#D6BD98" />
			<Setter Property="FontSize" Value="8" />
			<Setter Property="Foreground" Value="#2C3930" />
			<Setter Property="Margin" Value="0" />
			<Setter Property="Padding" Value="0" />
			<!--<Setter Property="Height" Value="20" />-->
		</Style>
		

	</Window.Resources>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="20" />
			<RowDefinition Height="*" />
			<RowDefinition Height="15" />
			<RowDefinition Height="15" />
			<RowDefinition Height="15" />
		</Grid.RowDefinitions>
		<StackPanel Orientation="Horizontal" Grid.Row="0">
			<TextBox x:Name="RootPassword" Height="10" Width="50" HorizontalAlignment="Left"
						 FontSize="6" AcceptsReturn="True" Grid.Row="0" Margin="5 0"
						 Text="{Binding RootPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
						 >
				<TextBox.InputBindings>
					<KeyBinding Key="Enter" Command="{Binding EnterPressed_command}" />
				</TextBox.InputBindings>
			</TextBox>
			<Label Content="" />
		</StackPanel>
		<StackPanel Grid.Row="1">
			<StackPanel Grid.Column="0" Margin="5" Width="150">
				<Button Content="Force Upload" Margin="5" Width="auto" Height="30"
					Command="{Binding ForceUpload_command}"
					Visibility="{Binding BackupStatus, Converter={StaticResource BackupStatusToVisibilityConverter}}"
					IsEnabled="{Binding BackupStatus, Converter={StaticResource BackupStatusToBoolConverter}}"
					Style="{StaticResource ResourceKey=StyledButton}"
					/>
				<Button Content="Start Sync" Margin="5" Width="auto" Height="30"
					Command="{Binding StartSync_command}"
					Style="{StaticResource ResourceKey=StyledButton}"
					/>
				<Button Content="Pause Sync" Margin="5" Width="auto" Height="30"
					Command="{Binding PauseSync_command}"
					Style="{StaticResource ResourceKey=StyledButton}"
					/>
			</StackPanel>
		</StackPanel>

		<StatusBar Grid.Row="2" >
			<StatusBarItem>
				<TextBlock Text="Status:" VerticalAlignment="center" />
			</StatusBarItem>

			<StatusBarItem>
				<TextBlock VerticalAlignment="Center" Width="auto"
					Text="{Binding BackupStatus, Converter={StaticResource BackupStatusToStringConverter}}" />
			</StatusBarItem>
			
			<StatusBarItem Name="FileBeingUploaded">
				<TextBlock Width="auto" VerticalAlignment="Center" 
						Text="{Binding FileBeingUploaded, UpdateSourceTrigger=PropertyChanged}"/>
			</StatusBarItem>
		</StatusBar>

		<StatusBar Grid.Row="3" >
			<StatusBarItem>
				<TextBlock Width="auto" Text="Last sync:" />
			</StatusBarItem>

			<StatusBarItem>
				<TextBlock Margin="5 0" Width="120" Text="{Binding LastBackupTime}" />
			</StatusBarItem>
		</StatusBar>

		<StatusBar Grid.Row="4" Padding="0" Margin="0">
			<StatusBarItem HorizontalAlignment="Center" Padding="0" Margin="0">
				<ProgressBar Width="295" Value="{Binding FtpManager.ProgressValue}" Maximum="100"
							 Height="10"/>
			</StatusBarItem>
		</StatusBar>
	</Grid>
</Window>