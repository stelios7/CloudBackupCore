<Window x:Class="Cloud_Backup_Core.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Cloud_Backup_Core"
        xmlns:converters="clr-namespace:Cloud_Backup_Core.Helpers"
		xmlns:settings="clr-namespace:Cloud_Backup_Core.Views"
        mc:Ignorable="d"
        Title="Cloud Backup Core" Height="250" Width="300"
		ResizeMode="NoResize"
		
		>
	<Window.Resources>
		<converters:BackupStatusToStringConverter x:Key="BackupStatusToStringConverter"/>
		<converters:BackupStatusToBoolConverter x:Key="BackupStatusToBoolConverter" />
		<converters:BackupStatusToVisibilityConverter x:Key="BackupStatusToVisibilityConverter" />
		<converters:DoubleToStringConverter x:Key="DoubleToStringConverter" />
	</Window.Resources>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="20" />
			<RowDefinition Height="*" />
			<RowDefinition Height="25" />
			<RowDefinition Height="25" />
			<RowDefinition Height="15" />
		</Grid.RowDefinitions>
		<TextBox x:Name="RootPassword" Height="10" Width="50" HorizontalAlignment="Left"
					 FontSize="6" AcceptsReturn="True" Grid.Row="0" Margin="5 0"
					 Text="{Binding RootPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
					 >
			<TextBox.InputBindings>
				<KeyBinding Key="Enter" Command="{Binding EnterPressed_command}" />
			</TextBox.InputBindings>
		</TextBox>
		<StackPanel Grid.Row="1">
			<StackPanel Grid.Column="0" Margin="5" Width="150">
				<Button Content="Force Upload" Margin="5" Width="auto" Height="30"
					Command="{Binding ForceUpload_command}"
					Visibility="{Binding BackupStatus, Converter={StaticResource BackupStatusToVisibilityConverter}}"
					IsEnabled="{Binding BackupStatus, Converter={StaticResource BackupStatusToBoolConverter}}"
					Style="{StaticResource ResourceKey=StyledButton}"
					/>
				<Button Content="Start Sync" Margin="5" Width="auto" Height="30"
					Command="{Binding StartSync_command}"
					Style="{StaticResource ResourceKey=StyledButton}"
					/>
				<Button Content="Pause Sync" Margin="5" Width="auto" Height="30"
					Command="{Binding PauseSync_command}"
					Style="{StaticResource ResourceKey=StyledButton}"
					/>
			</StackPanel>
		</StackPanel>

		<StatusBar Grid.Row="2" Padding="0" Margin="0">
			<StatusBarItem>
				<TextBlock Text="Status:" VerticalAlignment="center" FontSize="11"/>
			</StatusBarItem>

			<StatusBar Padding="0" Margin="0">
				<TextBlock Padding="0" Margin="0" FontSize="11" VerticalAlignment="Center" Width="auto"
					Text="{Binding BackupStatus, Converter={StaticResource BackupStatusToStringConverter}}" />
			</StatusBar>
			<StatusBarItem Name="FileBeingUploaded">
				<TextBlock Padding="0" FontSize="11" Width="auto" VerticalAlignment="Center" 
						Text="{Binding FileBeingUploaded, UpdateSourceTrigger=PropertyChanged}"/>
			</StatusBarItem>
		</StatusBar>
		
		<StatusBar Grid.Row="3" Padding="0" Margin="0">
			<StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
				<Label Margin="0 0" Padding="0" FontSize="12" HorizontalContentAlignment="Stretch" Width="auto" VerticalContentAlignment="Stretch" Content="Last sync:" />
				<Label Margin="5 0" Padding="0" FontSize="12" HorizontalContentAlignment="Stretch" Width="120" VerticalContentAlignment="Stretch" Content="{Binding LastBackupTime}" />
			</StackPanel>
		</StatusBar>

		<StatusBar Grid.Row="4" Padding="0" Margin="0">
			<StatusBarItem HorizontalAlignment="Center" Padding="0" Margin="0">
				<ProgressBar Margin="0" Padding="0" Height="10" Width="250" Value="{Binding FtpManager.ProgressValue}" Maximum="100"/>
			</StatusBarItem>
		</StatusBar>


	</Grid>
</Window>
